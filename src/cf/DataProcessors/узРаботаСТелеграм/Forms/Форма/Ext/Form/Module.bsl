
&НаСервере
Процедура ОтправитьСообщениеНаСервере()
	
	//+ #240 Пиганов Г.В. 2020-09-08
	//+ #174 Кравцов А.В. 2019-06-06
	//МассивПользователейДляОтправки = Новый Массив;
	//МассивПользователейДляОтправки.Добавить(ЭтотОбъект.ПользовательДляОтправки);
	//МассивПользователейКому = Новый Массив;
	//МассивПользователейКому.Добавить(ЭтотОбъект.ПользовательДляОтправки);
	//МассивПользователейДляОтправки = узТелеграммСервер.ПолучитьМассивПолучателей(МассивПользователейКому); 
	//- #174 Кравцов А.В. 2019-06-06
	//пОбъект = РеквизитФормыВЗначение("Объект");
	// ++ 79Vlad 20.06.2019 #174  \\
	//пОбъект.ОтправитьСообщениеTelegram(ЭтотОбъект.ТескстСообщенияДляОтправки, МассивПользователейДляОтправки);
	//пОбъект.ОтправитьСообщениеTelegram(ЭтотОбъект.ТескстСообщенияДляОтправки, МассивПользователейДляОтправки,Истина);
	// -- 79Vlad 20.06.2019 #174
	узТелеграмБот.ОтправитьСообщение(ЭтотОбъект.ТескстСообщенияДляОтправки, ЭтотОбъект.ПользовательДляОтправки, Истина);
	//- #240 Пиганов Г.В. 2020-09-08
	
КонецПроцедуры

&НаКлиенте
Процедура ОтправитьСообщение(Команда)
	ОтправитьСообщениеНаСервере();
КонецПроцедуры

&НаСервере
Процедура ПрочитатьСообщенияНаСервере()
	
	//+ #240 Пиганов Г.В. 2020-09-08
	//пОбъект = РеквизитФормыВЗначение("Объект");
	//пОбъект.ПрочитатьСообщенияTelegram();
	//ЗначениеВРеквизитФормы(пОбъект, "Объект");
	Ответ = Неопределено;
	НовыеСообщения = узТелеграмБот.ПолучитьНовыеСообщения(Объект.MaxMessangeID, Ответ);
	Объект.HTTPОтвет = Ответ.ПолучитьТелоКакСтроку();
	Для Каждого Сообщение Из НовыеСообщения Цикл
		узТелеграмБотКоманды.ОбработатьКомандыСообщения(Сообщение);
	КонецЦикла;
	//- #240 Пиганов Г.В. 2020-09-08
	
КонецПроцедуры

&НаКлиенте
Процедура ПрочитатьСообщения(Команда)
	ПрочитатьСообщенияНаСервере();
КонецПроцедуры
